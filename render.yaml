# Render service manifest for Megapark Hotel Full-Stack App
services:
  - type: web
    name: megapark-backend
    env: node
    region: oregon
    plan: free
    repo: .
    branch: main
    buildCommand: bash -c 'echo "===== BUILDING FRONTEND =====" && npm --prefix frontend install && echo "Frontend installed" && npm --prefix frontend run build && echo "Frontend built successfully" && ls -la frontend/dist/ && echo "===== INSTALLING BACKEND =====" && npm --prefix backend install && echo "Backend installed"'
    startCommand: node backend/index.js
    autoDeploy: true
    envVars:
      - key: NODE_ENV
        value: production
      - key: PORT
        value: '3000'
      - key: PGSSLMODE
        value: require

databases:
  - name: megapark-db
    plan: starter
    region: oregon
